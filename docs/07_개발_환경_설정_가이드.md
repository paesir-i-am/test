# 개발 환경 설정 가이드

## 1. 문서 정보

### 프로젝트명
**쑤카 (Sooka)**

### 문서 버전
v1.0

### 작성일
2024년 (작성일자)

### 문서 목적
쑤카 프로젝트의 개발 환경을 설정하고 프로젝트를 시작하기 위한 가이드를 제공합니다.

---

## 2. 기술 스택

### 2.1 Frontend
- **프레임워크**: React.js 18+ 또는 Next.js 14+
- **언어**: TypeScript 5+
- **상태 관리**: Redux Toolkit 또는 Zustand
- **스타일링**: Tailwind CSS 3+
- **UI 라이브러리**: Material-UI 또는 Ant Design
- **HTTP 클라이언트**: Axios
- **폼 관리**: React Hook Form
- **라우팅**: React Router (React 사용 시) 또는 Next.js Router

### 2.2 Backend
- **런타임**: Node.js 18+ 또는 Python 3.11+
- **프레임워크**: 
  - Node.js: Express.js 4+ 또는 NestJS
  - Python: Django 4+ 또는 FastAPI
- **언어**: TypeScript (Node.js) 또는 Python
- **인증**: JWT (jsonwebtoken)
- **비밀번호 암호화**: bcrypt

### 2.3 Database
- **주 데이터베이스**: PostgreSQL 15+ 또는 MySQL 8+
- **ORM/ODM**: 
  - Node.js: Prisma 또는 TypeORM
  - Python: SQLAlchemy 또는 Django ORM
- **캐시**: Redis 7+

### 2.4 인프라
- **호스팅**: 
  - Frontend: Vercel 또는 Netlify
  - Backend: AWS, Railway, 또는 Heroku
- **이미지 저장**: AWS S3 또는 Cloudinary
- **CI/CD**: GitHub Actions
- **모니터링**: Sentry

### 2.5 개발 도구
- **버전 관리**: Git
- **패키지 관리자**: 
  - Node.js: npm 또는 yarn
  - Python: pip 또는 poetry
- **코드 포매터**: Prettier, ESLint
- **테스트**: Jest, React Testing Library

---

## 3. 필수 요구사항

### 3.1 시스템 요구사항
- **운영체제**: macOS, Windows, 또는 Linux
- **메모리**: 최소 8GB RAM (권장: 16GB)
- **디스크**: 최소 10GB 여유 공간

### 3.2 필수 소프트웨어
- **Node.js**: 18.x 이상 또는 Python 3.11 이상
- **Git**: 2.30 이상
- **데이터베이스**: PostgreSQL 15 이상 또는 MySQL 8 이상
- **Redis**: 7.0 이상 (선택)
- **에디터**: VS Code (권장)

---

## 4. 프로젝트 초기 설정

### 4.1 저장소 클론
```bash
git clone https://github.com/your-org/sooka.git
cd sooka
```

### 4.2 Frontend 설정 (React)

#### 프로젝트 생성
```bash
# React + TypeScript
npx create-react-app frontend --template typescript
cd frontend

# 또는 Next.js
npx create-next-app@latest frontend --typescript --tailwind --app
cd frontend
```

#### 의존성 설치
```bash
npm install
# 또는
yarn install
```

#### 필요한 패키지 설치
```bash
npm install axios react-redux @reduxjs/toolkit react-router-dom
npm install -D tailwindcss postcss autoprefixer
npm install -D @types/react @types/react-dom
```

---

### 4.3 Backend 설정 (Node.js + Express)

#### 프로젝트 초기화
```bash
mkdir backend
cd backend
npm init -y
```

#### TypeScript 설정
```bash
npm install -D typescript @types/node @types/express ts-node nodemon
npx tsc --init
```

#### 필요한 패키지 설치
```bash
npm install express cors dotenv
npm install jsonwebtoken bcryptjs
npm install prisma @prisma/client
npm install -D @types/express @types/cors @types/jsonwebtoken @types/bcryptjs
```

#### Express 기본 구조
```
backend/
├── src/
│   ├── controllers/
│   ├── models/
│   ├── routes/
│   ├── middleware/
│   ├── utils/
│   └── app.ts
├── prisma/
│   └── schema.prisma
├── .env
├── package.json
└── tsconfig.json
```

---

### 4.4 Backend 설정 (Python + Django)

#### 가상환경 생성
```bash
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# 또는
venv\Scripts\activate  # Windows
```

#### Django 프로젝트 생성
```bash
pip install django djangorestframework
django-admin startproject backend
cd backend
python manage.py startapp api
```

#### 필요한 패키지 설치
```bash
pip install django-cors-headers
pip install django-environ
pip install djangorestframework-simplejwt
pip install pillow  # 이미지 처리
```

---

## 5. 환경 변수 설정

### 5.1 Frontend (.env)
```env
REACT_APP_API_BASE_URL=http://localhost:3001/api/v1
REACT_APP_ENV=development
```

### 5.2 Backend (.env)
```env
# 서버 설정
PORT=3001
NODE_ENV=development

# 데이터베이스
DATABASE_URL=postgresql://user:password@localhost:5432/sooka
# 또는
DATABASE_URL=mysql://user:password@localhost:3306/sooka

# JWT
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your_refresh_secret_key_here
JWT_REFRESH_EXPIRES_IN=7d

# Redis (선택)
REDIS_URL=redis://localhost:6379

# 이미지 저장 (AWS S3)
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=sooka-images

# 또는 Cloudinary
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# CORS
CORS_ORIGIN=http://localhost:3000
```

---

## 6. 데이터베이스 설정

### 6.1 PostgreSQL 설치 및 설정

#### macOS (Homebrew)
```bash
brew install postgresql@15
brew services start postgresql@15
```

#### 데이터베이스 생성
```bash
psql postgres
CREATE DATABASE sooka;
CREATE USER sooka_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE sooka TO sooka_user;
\q
```

### 6.2 Prisma 설정 (Node.js)

#### Prisma 초기화
```bash
npx prisma init
```

#### schema.prisma 예시
```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        BigInt   @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String
  // ... 기타 필드
}
```

#### 마이그레이션 실행
```bash
npx prisma migrate dev --name init
npx prisma generate
```

### 6.3 Django 데이터베이스 설정

#### settings.py
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'sooka',
        'USER': 'sooka_user',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

#### 마이그레이션 실행
```bash
python manage.py makemigrations
python manage.py migrate
```

---

## 7. Redis 설정

### 7.1 Redis 설치

#### macOS (Homebrew)
```bash
brew install redis
brew services start redis
```

#### Redis 클라이언트 설치 (Node.js)
```bash
npm install redis
```

#### Redis 클라이언트 설치 (Python)
```bash
pip install redis
```

---

## 8. 개발 서버 실행

### 8.1 Frontend 개발 서버

#### React
```bash
cd frontend
npm start
# http://localhost:3000
```

#### Next.js
```bash
cd frontend
npm run dev
# http://localhost:3000
```

### 8.2 Backend 개발 서버

#### Node.js + Express
```bash
cd backend
npm run dev
# http://localhost:3001
```

#### Python + Django
```bash
cd backend
python manage.py runserver
# http://localhost:8000
```

---

## 9. 코드 품질 도구

### 9.1 ESLint 설정 (Frontend)

#### .eslintrc.json
```json
{
  "extends": [
    "react-app",
    "react-app/jest"
  ],
  "rules": {
    "no-console": "warn",
    "no-unused-vars": "warn"
  }
}
```

### 9.2 Prettier 설정

#### .prettierrc
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### 9.3 Git Hooks (Husky)

#### 설치
```bash
npm install -D husky lint-staged
npx husky install
```

#### pre-commit 설정
```bash
npx husky add .husky/pre-commit "npx lint-staged"
```

#### lint-staged 설정 (.lintstagedrc)
```json
{
  "*.{js,jsx,ts,tsx}": [
    "eslint --fix",
    "prettier --write"
  ]
}
```

---

## 10. 테스트 설정

### 10.1 Jest 설정 (Frontend)

#### package.json
```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
```

### 10.2 테스트 예시
```typescript
// __tests__/App.test.tsx
import { render, screen } from '@testing-library/react';
import App from '../App';

test('renders app', () => {
  render(<App />);
  const linkElement = screen.getByText(/쑤카/i);
  expect(linkElement).toBeInTheDocument();
});
```

---

## 11. 배포 설정

### 11.1 Frontend 배포 (Vercel)

#### vercel.json
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "build",
  "devCommand": "npm start",
  "framework": "create-react-app"
}
```

#### 배포
```bash
npm install -g vercel
vercel
```

### 11.2 Backend 배포 (Railway)

#### railway.json
```json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "npm start",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

---

## 12. 모니터링 설정

### 12.1 Sentry 설정

#### Frontend
```bash
npm install @sentry/react
```

```typescript
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: "your_sentry_dsn",
  environment: process.env.NODE_ENV,
});
```

#### Backend (Node.js)
```bash
npm install @sentry/node
```

---

## 13. 트러블슈팅

### 13.1 일반적인 문제

#### 포트 충돌
```bash
# 포트 사용 중인 프로세스 확인
lsof -i :3000
# 프로세스 종료
kill -9 <PID>
```

#### 데이터베이스 연결 실패
- 데이터베이스 서비스 실행 확인
- 환경 변수 확인
- 방화벽 설정 확인

#### 의존성 문제
```bash
# node_modules 삭제 후 재설치
rm -rf node_modules package-lock.json
npm install
```

---

## 14. 개발 워크플로우

### 14.1 Git 브랜치 전략
- **main**: 프로덕션 배포 브랜치
- **develop**: 개발 브랜치
- **feature/**: 기능 개발 브랜치
- **hotfix/**: 긴급 수정 브랜치

### 14.2 커밋 메시지 규칙
```
feat: 새로운 기능 추가
fix: 버그 수정
docs: 문서 수정
style: 코드 포매팅
refactor: 코드 리팩토링
test: 테스트 추가
chore: 빌드 설정 등
```

### 14.3 Pull Request 프로세스
1. 기능 개발 완료
2. 브랜치 푸시
3. Pull Request 생성
4. 코드 리뷰
5. 승인 후 머지

---

## 15. 참고 자료

### 15.1 공식 문서
- [React 공식 문서](https://react.dev)
- [Next.js 공식 문서](https://nextjs.org/docs)
- [Express.js 공식 문서](https://expressjs.com)
- [Django 공식 문서](https://docs.djangoproject.com)
- [PostgreSQL 공식 문서](https://www.postgresql.org/docs)

### 15.2 유용한 리소스
- [TypeScript 핸드북](https://www.typescriptlang.org/docs)
- [Tailwind CSS 문서](https://tailwindcss.com/docs)
- [Prisma 문서](https://www.prisma.io/docs)

---

## 문서 승인

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| 프로젝트 매니저 | | | |
| 기술 리더 | | | |
| 개발 리더 | | | |

---

**문서 버전**: 1.0  
**최종 수정일**: 2024년 (작성일자)  
**다음 리뷰일**: 프로젝트 진행 중 필요시 수정


# 기능 명세서

## 1. 문서 정보

### 프로젝트명
**쑤카 (Sooka)**

### 문서 버전
v1.0

### 작성일
2024년 (작성일자)

### 문서 목적
쑤카 프로젝트의 각 기능에 대한 상세 명세를 제공하여 개발팀이 정확하게 구현할 수 있도록 합니다.

---

## 2. 사용자 관리

### 2.1 회원가입

#### 화면 구성
- 이메일 입력 필드
- 비밀번호 입력 필드
- 비밀번호 확인 필드
- 역할 선택 (구매자/판매자/둘 다)
- 이용약관 동의 체크박스
- 개인정보 처리방침 동의 체크박스
- 회원가입 버튼

#### 기능 흐름
1. 사용자가 이메일, 비밀번호 입력
2. 이메일 형식 검증
3. 비밀번호 강도 검증 (최소 8자, 영문/숫자)
4. 이메일 중복 확인
5. 이용약관 동의 확인
6. 회원가입 처리
7. 성공 시 로그인 페이지로 이동

#### 입력 검증 규칙
- **이메일**: 
  - 필수 입력
  - 이메일 형식 검증
  - 중복 불가
- **비밀번호**:
  - 필수 입력
  - 최소 8자 이상
  - 영문 + 숫자 조합
  - 특수문자 권장 (선택)
- **비밀번호 확인**:
  - 비밀번호와 일치해야 함

#### 예외 처리
- 중복 이메일: "이미 사용 중인 이메일입니다"
- 비밀번호 불일치: "비밀번호가 일치하지 않습니다"
- 약관 미동의: "이용약관에 동의해주세요"

---

### 2.2 로그인

#### 화면 구성
- 이메일 입력 필드
- 비밀번호 입력 필드
- 자동 로그인 체크박스
- 로그인 버튼
- 비밀번호 찾기 링크
- 회원가입 링크

#### 기능 흐름
1. 사용자가 이메일, 비밀번호 입력
2. 입력 값 검증
3. 서버에서 인증 처리
4. 성공 시 JWT 토큰 발급
5. 메인 페이지로 이동

#### 보안 규칙
- 로그인 실패 5회 시 계정 일시 잠금 (30분)
- 비밀번호는 암호화하여 전송
- 토큰은 HttpOnly 쿠키 또는 LocalStorage에 저장

#### 예외 처리
- 잘못된 이메일/비밀번호: "이메일 또는 비밀번호가 올바르지 않습니다"
- 계정 잠금: "로그인 시도가 너무 많습니다. 30분 후 다시 시도해주세요"

---

### 2.3 프로필 관리

#### 화면 구성
- 프로필 사진 (수정 가능)
- 이름
- 이메일 (수정 불가)
- 전화번호
- 주소
- 역할 (구매자/판매자)
- 비밀번호 변경 섹션

#### 기능 흐름
1. 현재 프로필 정보 로드
2. 사용자가 정보 수정
3. 변경사항 저장
4. 성공 메시지 표시

#### 비밀번호 변경
1. 현재 비밀번호 입력
2. 새 비밀번호 입력
3. 새 비밀번호 확인
4. 검증 후 변경 처리

---

## 3. 차량 등록 및 관리

### 3.1 차량 등록

#### 화면 구성
- **기본 정보 섹션**
  - 제조사 선택 (드롭다운)
  - 모델 선택 (드롭다운, 제조사 선택 후 활성화)
  - 상세 모델명 (입력)
  - 연식 (연도 선택)
  - 주행거리 (숫자 입력, km)
  - 가격 (숫자 입력, 원)
  
- **차량 사양 섹션**
  - 연료 유형 (가솔린/디젤/하이브리드/전기/LPG)
  - 변속기 유형 (수동/자동)
  - 색상 (선택)
  - 지역 (시/도 선택)
  
- **추가 정보 섹션**
  - 옵션 (다중 선택: 선루프, 네비게이션, 후방카메라 등)
  - 사고 이력 (있음/없음)
  - 사고 상세 내용 (텍스트)
  - 수리 이력 (텍스트)
  - 차량 설명 (텍스트 영역)
  - 차량 번호 (선택, 입력)
  
- **사진 업로드 섹션**
  - 사진 업로드 영역 (드래그 앤 드롭)
  - 업로드된 사진 미리보기
  - 사진 삭제 기능
  - 대표 사진 설정
  
- **미리보기 버튼**
- **등록 버튼**

#### 기능 흐름
1. 사용자가 차량 정보 입력
2. 필수 항목 검증
3. 사진 업로드 (최소 1장)
4. 미리보기 확인 (선택)
5. 등록 버튼 클릭
6. 서버에 저장 요청
7. 관리자 승인 대기 상태로 저장
8. 성공 메시지 표시

#### 입력 검증 규칙
- **제조사**: 필수 선택
- **모델**: 필수 선택
- **연식**: 필수 선택, 1980년 ~ 현재 연도
- **주행거리**: 필수 입력, 0 이상, 숫자만
- **가격**: 필수 입력, 0 이상, 숫자만
- **사진**: 최소 1장, 최대 20장
- **파일 크기**: 개별 파일 5MB 이하
- **파일 형식**: jpg, png, webp만 허용

#### 예외 처리
- 필수 항목 누락: 해당 필드에 에러 메시지 표시
- 사진 미업로드: "최소 1장의 사진을 업로드해주세요"
- 파일 크기 초과: "파일 크기는 5MB 이하여야 합니다"
- 잘못된 파일 형식: "jpg, png, webp 파일만 업로드 가능합니다"

---

### 3.2 차량 정보 수정

#### 화면 구성
- 차량 등록 화면과 동일
- 기존 정보가 입력되어 있음
- 상태 변경 (판매중/예약중/판매완료)

#### 기능 흐름
1. 등록된 차량 정보 로드
2. 사용자가 정보 수정
3. 변경사항 저장
4. 관리자 승인 대기 (정보 변경 시)

#### 제한 사항
- 판매완료 상태에서는 수정 불가
- 승인 대기 중인 차량은 수정 불가

---

### 3.3 차량 삭제

#### 기능 흐름
1. 사용자가 차량 삭제 요청
2. 확인 다이얼로그 표시
3. 확인 시 삭제 처리
4. 삭제된 차량은 목록에서 제외

---

## 4. 차량 검색 및 조회

### 4.1 차량 목록 조회

#### 화면 구성
- **검색 바**
  - 키워드 입력 필드
  - 검색 버튼
  
- **필터 패널**
  - 가격대 슬라이더
  - 제조사 체크박스
  - 연식 범위 선택
  - 주행거리 범위 선택
  - 연료 유형 체크박스
  - 변속기 유형 체크박스
  - 지역 선택
  - 사고 이력 필터
  - 필터 초기화 버튼
  
- **정렬 옵션**
  - 최신순 (기본)
  - 가격 낮은순
  - 가격 높은순
  - 주행거리 적은순
  - 주행거리 많은순
  - 조회수 높은순
  
- **차량 카드 목록**
  - 썸네일 이미지
  - 제조사/모델명
  - 연식/주행거리
  - 가격
  - 지역
  - 조회수
  - 찜하기 버튼 (로그인 시)
  
- **페이지네이션**
  - 이전/다음 버튼
  - 페이지 번호

#### 기능 흐름
1. 페이지 로드 시 최신 차량 목록 표시
2. 필터 적용 시 즉시 결과 업데이트
3. 검색 시 결과 필터링
4. 정렬 변경 시 목록 재정렬
5. 페이지네이션으로 추가 결과 로드

#### 성능 최적화
- 페이지당 20개 항목만 로드
- 무한 스크롤 (선택)
- 이미지 lazy loading
- 검색 결과 캐싱

---

### 4.2 차량 상세 조회

#### 화면 구성
- **상단 갤러리**
  - 대표 이미지 (큰 화면)
  - 썸네일 목록 (하단)
  - 이미지 확대보기 모달
  
- **차량 정보 섹션**
  - 제조사/모델명 (큰 제목)
  - 가격 (강조)
  - 기본 정보 (연식, 주행거리, 연료, 변속기, 색상, 지역)
  - 옵션 목록
  - 사고 이력 정보
  - 수리 이력 정보
  - 차량 설명
  
- **판매자 정보 섹션**
  - 판매자 이름
  - 판매자 평점 (향후)
  - 판매자 등록 차량 수
  - 문의하기 버튼
  
- **액션 버튼**
  - 찜하기 버튼
  - 공유하기 버튼
  - 신고하기 버튼
  
- **관련 차량 추천** (선택)
  - 비슷한 차량 목록

#### 기능 흐름
1. 차량 상세 페이지 로드
2. 차량 정보 조회
3. 조회수 증가
4. 이미지 갤러리 표시
5. 판매자 정보 표시
6. 관련 차량 추천 (선택)

#### 조회수 카운팅
- 페이지 로드 시 조회수 증가
- 동일 사용자 중복 조회 방지 (쿠키 기반, 24시간)

---

## 5. 관심 차량 관리

### 5.1 찜하기

#### 기능 흐름
1. 로그인 사용자가 찜하기 버튼 클릭
2. 서버에 찜하기 요청
3. 성공 시 버튼 상태 변경 (채워진 하트)
4. 찜한 차량 수 증가

#### 비로그인 사용자
- 찜하기 버튼 클릭 시 로그인 페이지로 이동

---

### 5.2 관심 차량 목록

#### 화면 구성
- 찜한 차량 목록 (카드 형태)
- 각 차량에 찜하기 취소 버튼
- 빈 목록 안내 메시지

#### 기능 흐름
1. 찜한 차량 목록 로드
2. 판매완료된 차량 표시 (회색 처리)
3. 찜하기 취소 기능 제공

---

## 6. 문의 및 소통

### 6.1 문의하기

#### 화면 구성
- 문의 제목 입력 필드
- 문의 내용 텍스트 영역
- 전송 버튼
- 취소 버튼

#### 기능 흐름
1. 사용자가 문의 제목, 내용 입력
2. 입력 값 검증
3. 판매자에게 문의 전송
4. 성공 메시지 표시
5. 문의 내역 페이지로 이동

#### 입력 검증
- 제목: 필수, 최대 100자
- 내용: 필수, 최대 1000자

---

### 6.2 문의 내역 조회

#### 화면 구성
- 탭: 받은 문의 / 보낸 문의
- 문의 목록:
  - 차량 정보 (제목, 썸네일)
  - 문의 제목
  - 문의 상태 (답변 대기/답변 완료)
  - 문의 시각
  - 상세 보기 버튼

#### 기능 흐름
1. 받은 문의/보낸 문의 탭 선택
2. 해당 문의 목록 로드
3. 문의 클릭 시 상세 조회
4. 답변 작성 (판매자만)

---

## 7. 관리자 기능

### 7.1 차량 승인/거부

#### 화면 구성
- 대기 중인 차량 목록
- 각 차량 카드:
  - 차량 정보
  - 판매자 정보
  - 승인/거부 버튼
  - 상세 보기 버튼

#### 기능 흐름
1. 승인 대기 중인 차량 목록 조회
2. 차량 상세 정보 확인
3. 승인/거부 결정
4. 거부 시 사유 입력
5. 처리 완료

#### 승인 처리
- 승인된 차량은 일반 목록에 노출
- 거부된 차량은 판매자에게 알림 (향후)

---

### 7.2 사용자 관리

#### 화면 구성
- 사용자 목록 (테이블)
  - 이메일
  - 이름
  - 역할
  - 가입일
  - 상태 (정상/정지)
  - 액션 버튼

#### 기능 흐름
1. 사용자 목록 조회
2. 사용자 검색
3. 사용자 상세 정보 조회
4. 사용자 정지/해제
5. 역할 변경

---

### 7.3 공지사항 관리

#### 화면 구성
- 공지사항 목록
- 작성 버튼
- 각 공지사항:
  - 제목
  - 작성일
  - 고정 여부
  - 수정/삭제 버튼

#### 기능 흐름
1. 공지사항 목록 조회
2. 공지사항 작성
3. 공지사항 수정
4. 공지사항 삭제
5. 고정/해제

---

## 8. 사용자 플로우 (User Flow)

### 8.1 구매자 플로우

```
1. 메인 페이지 접속
   ↓
2. 차량 검색 또는 필터링
   ↓
3. 차량 목록에서 차량 선택
   ↓
4. 차량 상세 페이지 조회
   ↓
5. (선택) 찜하기
   ↓
6. 문의하기
   ↓
7. 문의 내역 확인
```

### 8.2 판매자 플로우

```
1. 로그인
   ↓
2. 차량 등록 페이지 이동
   ↓
3. 차량 정보 입력
   ↓
4. 사진 업로드
   ↓
5. 등록 완료 (승인 대기)
   ↓
6. 관리자 승인 대기
   ↓
7. 승인 완료 (차량 노출)
   ↓
8. 문의 확인 및 답변
```

### 8.3 관리자 플로우

```
1. 관리자 로그인
   ↓
2. 승인 대기 차량 목록 조회
   ↓
3. 차량 상세 정보 확인
   ↓
4. 승인/거부 결정
   ↓
5. 처리 완료
```

---

## 9. 화면 구성도 (Wireframe 참고)

### 9.1 메인 페이지
- 헤더 (로고, 검색바, 로그인/회원가입)
- 필터 사이드바
- 차량 목록 (그리드 레이아웃)
- 푸터

### 9.2 차량 상세 페이지
- 헤더
- 이미지 갤러리 (왼쪽)
- 차량 정보 (오른쪽)
- 판매자 정보
- 관련 차량 추천
- 푸터

---

## 문서 승인

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| 프로젝트 매니저 | | | |
| 기술 리더 | | | |
| 기획자 | | | |
| 개발 리더 | | | |

---

**문서 버전**: 1.0  
**최종 수정일**: 2024년 (작성일자)  
**다음 리뷰일**: 프로젝트 진행 중 필요시 수정

